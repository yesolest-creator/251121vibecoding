import streamlit as st

# 페이지 기본 설정
st.set_page_config(
    page_title="MBTI 진로 상담실",
    page_icon="🎓",
    layout="centered"
)

# --------------------------
# 데이터 정의
# --------------------------
MBTI_TYPES = [
    "INTJ", "INTP", "ENTJ", "ENTP",
    "INFJ", "INFP", "ENFJ", "ENFP",
    "ISTJ", "ISFJ", "ESTJ", "ESFJ",
    "ISTP", "ISFP", "ESTP", "ESFP",
]

mbti_careers = {
    "INTJ": [
        {"title": "데이터 과학자 📊", "desc": "복잡한 데이터를 분석해 패턴을 찾고, 미래를 예측하는 일을 수행함."},
        {"title": "전략 기획자 🧠", "desc": "조직의 장기적인 방향성과 전략을 설계하고 실행 계획을 수립함."},
        {"title": "연구원 (공학/과학) 🔬", "desc": "체계적인 사고로 연구 과제를 설정하고 실험·분석을 통해 새로운 지식을 탐구함."},
    ],
    "INTP": [
        {"title": "연구 개발 엔지니어 ⚙️", "desc": "논리적인 사고를 기반으로 새로운 기술과 제품을 설계·개발함."},
        {"title": "AI·알고리즘 개발자 🤖", "desc": "문제를 수학적·논리적으로 구조화하여 효율적인 알고리즘을 설계함."},
        {"title": "학자·이론 연구자 📚", "desc": "호기심을 바탕으로 개념과 이론을 깊이 파고들며 지식 체계를 정교하게 다듬음."},
    ],
    "ENTJ": [
        {"title": "기업 경영자(CEO) 🏢", "desc": "조직을 이끌며 목표 설정, 의사결정, 인력·자원 관리를 총괄함."},
        {"title": "프로젝트 매니저 📅", "desc": "여러 사람과 자원을 조율해 프로젝트를 계획하고 끝까지 완수함."},
        {"title": "경영 컨설턴트 💼", "desc": "기업의 문제를 분석하고 성과를 높일 전략을 제안함."},
    ],
    "ENTP": [
        {"title": "스타트업 창업가 🚀", "desc": "새로운 아이디어를 비즈니스로 구현하며 변화를 이끄는 역할을 함."},
        {"title": "기획자(서비스/콘텐츠) 🎬", "desc": "재미있고 색다른 서비스를 기획하고 사용자 경험을 설계함."},
        {"title": "혁신 컨설턴트 💡", "desc": "조직에 새로운 관점과 솔루션을 제시하여 변화를 촉진함."},
    ],
    "INFJ": [
        {"title": "심리 상담사 🧡", "desc": "사람의 감정과 고민에 공감하며, 내면의 성장을 돕는 역할을 함."},
        {"title": "교사·교육자 📖", "desc": "학생 개개인의 가능성을 발견하고, 성장할 수 있도록 안내함."},
        {"title": "비영리 단체 활동가 🌱", "desc": "사회적 약자와 환경을 위해 가치 중심의 프로젝트를 진행함."},
    ],
    "INFP": [
        {"title": "작가·에세이스트 ✍️", "desc": "감성과 상상력을 바탕으로 사람의 마음을 움직이는 글을 씀."},
        {"title": "예술가(일러스트·음악 등) 🎨", "desc": "자신만의 세계관과 메시지를 예술로 표현함."},
        {"title": "사회복지사 🤝", "desc": "도움이 필요한 사람들의 삶의 질을 높이기 위해 직접적인 지원을 제공함."},
    ],
    "ENFJ": [
        {"title": "담임 교사·멘토 👩‍🏫", "desc": "학생이나 구성원을 리드하며, 분위기를 만들고 성장의 방향을 제시함."},
        {"title": "HR 매니저(인사 담당) 🧩", "desc": "사람의 강점을 파악해 적절한 역할을 연결하고 조직의 문화를 설계함."},
        {"title": "교육 프로그램 기획자 📚", "desc": "사람들이 성장할 수 있는 교육 과정과 프로그램을 기획함."},
    ],
    "ENFP": [
        {"title": "크리에이터·콘텐츠 제작자 📺", "desc": "재미와 메시지를 담은 콘텐츠를 만들어 많은 사람들과 소통함."},
        {"title": "마케팅·브랜딩 담당자 📣", "desc": "브랜드의 매력을 찾아내어 사람들에게 설득력 있게 전달함."},
        {"title": "행사·이벤트 플래너 🎉", "desc": "다양한 사람을 모아 즐겁고 의미 있는 경험을 설계함."},
    ],
    "ISTJ": [
        {"title": "공무원 🏛️", "desc": "규칙과 절차를 중요하게 여기며, 안정적인 시스템 속에서 성실히 일함."},
        {"title": "회계사·재무 담당자 📑", "desc": "숫자와 기록을 정확하게 관리해 조직의 신뢰를 지킴."},
        {"title": "품질 관리 엔지니어 🧾", "desc": "제품이나 서비스가 기준에 맞는지 꼼꼼하게 점검함."},
    ],
    "ISFJ": [
        {"title": "간호사 🏥", "desc": "섬세한 돌봄과 책임감을 바탕으로 환자의 회복을 돕는 역할을 함."},
        {"title": "초·중등 교사 🍎", "desc": "학생들을 세심하게 돌보고, 안정적인 학급 분위기를 만드는 데 강점이 있음."},
        {"title": "행정·사무 담당자 🗂️", "desc": "보이지 않는 곳에서 조직이 잘 돌아가도록 서류와 일정을 탄탄하게 관리함."},
    ],
    "ESTJ": [
        {"title": "팀장·관리자 🧱", "desc": "구체적인 목표를 정하고, 계획대로 실행되도록 사람과 일을 관리함."},
        {"title": "운영·총무 관리자 🗃️", "desc": "조직의 실제 운영에 필요한 자원과 시스템을 책임감 있게 운영함."},
        {"title": "현장 소장·관리 감독자 🏗️", "desc": "현장의 안전과 효율을 관리하며 프로젝트가 계획대로 진행되도록 조율함."},
    ],
    "ESFJ": [
        {"title": "진로·생활 지도 교사 🧭", "desc": "학생 개개인의 상황을 이해하고 현실적인 조언과 도움을 제공함."},
        {"title": "서비스 기획·고객관리 담당자 🤗", "desc": "사람들의 만족도를 높이는 서비스 경험을 설계하고 관리함."},
        {"title": "병원 코디네이터 🩺", "desc": "의료진과 환자 사이에서 소통을 도와 편안한 의료 경험을 만들도록 돕는 역할을 함."},
    ],
    "ISTP": [
        {"title": "엔지니어(기계·전기) 🔧", "desc": "기계를 직접 다루고 문제를 해결하는 실용적 작업에 강점이 있음."},
        {"title": "보안·시스템 엔지니어 🖥️", "desc": "IT 시스템의 취약점을 분석하고 안정적인 운영을 보장함."},
        {"title": "정비사·테크니션 ✈️", "desc": "고도의 집중력을 바탕으로 장비를 점검하고 수리하는 일을 수행함."},
    ],
    "ISFP": [
        {"title": "디자이너(패션·그래픽) 👗", "desc": "섬세한 감각과 미적 기준을 바탕으로 아름다운 결과물을 만들어냄."},
        {"title": "공예가·핸드메이드 작가 🧵", "desc": "손으로 작품을 만들며 자신만의 감성을 담아 표현함."},
        {"title": "사진작가 📷", "desc": "순간과 분위기를 시각적으로 담아내는 데 뛰어난 감각을 발휘함."},
    ],
    "ESTP": [
        {"title": "세일즈·영업 전문가 🤝", "desc": "빠른 상황 판단과 말재주를 활용해 사람들을 설득하고 거래를 성사시킴."},
        {"title": "스포츠 코치·트레이너 🏃", "desc": "에너지 넘치는 지도와 실전 경험을 통해 사람들의 퍼포먼스를 끌어올림."},
        {"title": "이벤트·프로모션 기획자 🎪", "desc": "현장감 있는 이벤트를 기획하고 사람들의 반응을 즉각적으로 끌어내는 데 능숙함."},
    ],
    "ESFP": [
        {"title": "공연예술가(배우·댄서 등) 🎭", "desc": "무대 위에서 사람들에게 즐거움과 감동을 전달함."},
        {"title": "아나운서·MC·방송 진행자 🎤", "desc": "밝은 에너지와 친화력으로 사람들과 소통하고 분위기를 이끔."},
        {"title": "관광·여행 가이드 ✈️", "desc": "여행지의 즐거움을 사람들과 함께 나누고, 현장을 생동감 있게 이끌어감."},
    ],
}

# 모든 유형에 공통으로 쓸 수 있는 기본 추천 (혹시 키가 없을 경우 대비)
default_careers = [
    {"title": "교사·교육자 📘", "desc": "자신의 경험과 지식을 바탕으로 다른 사람의 성장을 돕는 진로."},
    {"title": "공무원·행정직 🏛️", "desc": "안정적인 환경에서 꾸준히 성실하게 일하며 사회 시스템을 지탱하는 역할."},
    {"title": "개발자·엔지니어 💻", "desc": "논리와 창의성을 활용해 새로운 서비스와 기술을 만드는 직업."},
]

# --------------------------
# UI 요소
# --------------------------

# 상단 배너
st.markdown(
    """
    <div style="
        background: linear-gradient(90deg, #4b6cb7, #182848);
        padding: 1.2rem 1.5rem;
        border-radius: 1rem;
        margin-bottom: 1.5rem;
        color: white;
    ">
        <h1 style="margin: 0; font-size: 1.8rem;">MBTI 진로 상담실 🎓✨</h1>
        <p style="margin: 0.3rem 0 0; font-size: 0.95rem; opacity: 0.9;">
            나의 성격 유형에 어울리는 진로를 가볍게 탐색해 보는 웹앱입니다.<br>
            너무 정답처럼 받아들이기보다, <b>진로 아이디어 💡를 얻는 도구</b>로 활용해 보세요!
        </p>
    </div>
    """,
    unsafe_allow_html=True,
)

# 사이드바
with st.sidebar:
    st.markdown("## 🧭 사용 방법")
    st.markdown(
        """
        1️⃣ MBTI 유형을 선택합니다.  
        2️⃣ 아래에 나타나는 추천 진로 3가지를 읽어 봅니다.  
        3️⃣ 마음에 드는 진로를 골라,  
        &nbsp;&nbsp;&nbsp;• 왜 끌리는지  
        &nbsp;&nbsp;&nbsp;• 어떤 능력이 필요할지  
        를 스스로 정리해 보세요. ✍️  

        ---
        🔔 *TIP:*  
        MBTI는 참고용일 뿐,  
        **진로의 가능성은 훨씬 더 넓다**는 점을 꼭 기억하세요!
        """
    )

# 메인 인터랙션
st.subheader("1️⃣ 나의 MBTI 유형 선택하기")

selected_mbti = st.selectbox(
    "자신의 MBTI 유형을 선택해 주세요 😊",
    options=MBTI_TYPES,
    index=MBTI_TYPES.index("INFP") if "INFP" in MBTI_TYPES else 0,
    help="모르면 대략적으로 비슷한 것을 골라도 괜찮아요!"
)

st.write("---")
st.subheader(f"2️⃣ {selected_mbti} 유형을 위한 맞춤 진로 추천 💡")

careers = mbti_careers.get(selected_mbti, default_careers)

# 카드 형태로 진로 추천 보여주기
for i, c in enumerate(careers, start=1):
    st.markdown(
        f"""
        <div style="
            border-radius: 0.9rem;
            padding: 0.9rem 1rem;
            margin-bottom: 0.8rem;
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0,0,0,0.06);
            box-shadow: 0 4px 10px rgba(0,0,0,0.04);
        ">
            <div style="font-size: 0.85rem; opacity: 0.7; margin-bottom: 0.2rem;">
                추천 #{i}
            </div>
            <div style="font-size: 1.05rem; font-weight: 700; margin-bottom: 0.25rem;">
                {c["title"]}
            </div>
            <div style="font-size: 0.95rem; line-height: 1.4;">
                {c["desc"]}
            </div>
        </div>
        """,
        unsafe_allow_html=True,
    )

st.write("---")
st.subheader("3️⃣ 진로 탐색 메모 📝")

note = st.text_area(
    "위 진로 중 마음이 끌리는 것을 골라, 왜 끌리는지와 필요한 역량을 적어 보세요.",
    placeholder="예시) ENFP인 나는 사람들과 소통하는 일을 좋아해서 마케팅 직무가 끌린다. 필요한 역량은 ...",
    height=140,
)

if note.strip():
    st.success("멋진 진로 탐색 중이네요! 이 메모를 기반으로 구체적인 진로 계획을 더 세워볼 수 있어요. 🌟")
else:
    st.info("간단히 한 줄이라도 적어 보면 스스로에 대해 더 잘 이해하는 데 큰 도움이 됩니다. 🙂")

st.caption("⚠️ 이 웹앱은 참고용 도구이며, 진로 결정의 최종 기준이 되기보다는 아이디어를 넓히는 데 사용해 주세요.")
